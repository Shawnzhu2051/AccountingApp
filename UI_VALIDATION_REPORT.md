# AccountingApp P0 MVP UI验收报告

**验收日期:** 2026-02-26
**验收人:** 老大 (Shawn)
**开发者:** 小朱0号Cld
**QA:** 小朱2号Kimi (代码逻辑验证已通过)

---

## 验收前准备

### 当前状态
- ✅ 应用已运行在iPhone 17 Pro模拟器
- ✅ 已有1笔测试数据 (SGD 15.5 吃饭)
- ✅ 代码逻辑验证已通过

### 验收目标
完成UI层交互验证,确认所有P0功能可正常使用

---

## 场景1: 多币种报表分离验证

### 目的
验证报表按币种分开展示,无跨币种合计

### 操作步骤

#### 步骤1.1: 添加SGD交易
1. 点击右下角蓝色 **+** 按钮
2. 填写:
   - 类型: **支出**
   - 金额: `100`
   - 币种: **SGD**
   - 分类: 点击"选择分类" → 左侧选"日常" → 右侧选"吃饭"
   - 时间: 保持默认
3. 点击右上角"保存"
4. 验证: 返回流水页,看到新交易在顶部

#### 步骤1.2: 添加RMB交易
1. 点击 **+** 按钮
2. 填写:
   - 金额: `200`
   - 币种: **RMB**
   - 分类: "购物" → "衣物"
3. 保存
4. 验证: 返回流水页,RMB交易在顶部

#### 步骤1.3: 添加USD交易
1. 点击 **+** 按钮
2. 填写:
   - 金额: `50`
   - 币种: **USD**
   - 分类: "出行" → "打车"
3. 保存

#### 步骤1.4: 再添加几笔多币种交易
建议添加:
- SGD 80 购物·数码产品
- RMB 150 日常·吃饭
- USD 30 娱乐·看剧

#### 步骤1.5: 查看报表
1. 点击底部 **"报表"** Tab
2. 向下滚动查看所有图表

### 验收标准 ✅

- [ ] **收支对比**: 看到SGD/RMB/USD各自的柱状图,分别展示
- [ ] **分类统计**: 每个币种有独立的饼图
- [ ] **时间趋势**: 每个币种有独立的折线图
- [ ] **项目统计**: 每个币种有独立的柱状图
- [ ] **无跨币种合计**: 没有看到"总计"之类的合并数字

### 截图位置
拍摄报表页面的:
- 收支对比区域
- 分类饼图区域
- 确认每个币种独立展示

---

## 场景2: 项目删除迁移验证

### 目的
验证删除项目时可选择迁移目标,历史交易projectId正确更新

### 操作步骤

#### 步骤2.1: 创建新项目
1. 点击底部 **"更多"** Tab
2. 点击 **"项目列表"**
3. 点击右上角 **+** 按钮
4. 输入项目名: `测试项目A`
5. 点击"确定"
6. 重复上述步骤,创建 `测试项目B`
7. 验证: 看到项目列表有3个项目 (日常项目, 测试项目A, 测试项目B)

#### 步骤2.2: 记录当前交易
1. 返回"流水"Tab
2. 记下当前有几笔交易 (应该有6-7笔)
3. 记下这些交易都显示"项目"字段(虽然目前不显示项目名)

#### 步骤2.3: 设置测试项目A为默认
1. 返回"更多" → "项目列表"
2. 点击"测试项目A"右侧的 ⋯ 按钮
3. 选择"设为默认"
4. 验证: "测试项目A"下方显示"默认项目"

#### 步骤2.4: 在测试项目A下添加交易
1. 返回"流水"Tab
2. 点击 **+** 添加新交易
   - 金额: 999
   - 币种: SGD
   - 分类: 金融 → 投资
3. 保存
4. 验证: 新交易出现在流水顶部

#### 步骤2.5: 删除测试项目A并迁移
1. 返回"更多" → "项目列表"
2. 点击"测试项目A"右侧 ⋯ 按钮
3. 选择 **"删除"**
4. 验证: 弹出Alert显示 **"选择要迁移到的项目:"**
5. 验证: Alert中显示可选项目 (日常项目, 测试项目B)
6. 点击 **"测试项目B"**
7. 验证: "测试项目A"从列表中消失

#### 步骤2.6: 验证迁移结果
1. 返回"流水"Tab
2. 验证: 所有交易仍然存在 (数量没有减少)
3. 点击刚才添加的 999 SGD 交易,进入详情
4. 验证: 项目显示为"默认项目"或其他(因为迁移逻辑已执行)

### 验收标准 ✅

- [ ] 删除项目时弹出迁移对话框
- [ ] 对话框显示所有可选目标项目
- [ ] 删除后,历史交易数量不变
- [ ] 迁移逻辑已执行 (通过数据库可验证projectId已更新)

### 截图位置
- 迁移对话框截图
- 删除前后的项目列表
- 删除前后的流水数量对比

---

## 场景3: 流水编辑验证

### 目的
验证编辑交易后UI刷新正常,排序按datetime倒序

### 操作步骤

#### 步骤3.1: 编辑交易
1. 在"流水"Tab中,点击任意交易进入详情
2. 修改金额: 改为 `888`
3. 修改分类: 改为 "娱乐" → "聚会"
4. 点击"保存"
5. 验证: 返回流水页

#### 步骤3.2: 验证编辑结果
1. 找到刚才编辑的交易
2. 验证: 金额已更新为 888
3. 验证: 分类已更新为 "聚会·娱乐"
4. 验证: 交易位置按时间排序(如果没改时间,位置应不变)

#### 步骤3.3: 编辑时间测试置顶
1. 点击另一笔旧交易
2. 修改时间为"现在"
3. 保存
4. 验证: 该交易移到流水顶部(因为时间最新)

#### 步骤3.4: 删除交易
1. 点击任意交易进入详情
2. 滚动到底部,点击红色 **"删除交易"** 按钮
3. 在弹出的确认对话框中点击"删除"
4. 验证: 返回流水页,该交易已消失

### 验收标准 ✅

- [ ] 编辑后金额/分类正确更新
- [ ] 编辑后UI实时刷新
- [ ] 排序按datetime倒序 (不改时间不置顶)
- [ ] 修改时间后会置顶
- [ ] 删除功能正常,UI实时刷新

---

## 场景4: CSV导出验证

### 目的
验证导出CSV文件格式正确,包含项目列,可在Excel打开

### 操作步骤

#### 步骤4.1: 导出CSV
1. 点击底部 **"更多"** Tab
2. 点击 **"导出Excel (CSV)"**
3. 选择时间范围:
   - 开始日期: 2026-02-01
   - 结束日期: 2026-02-28
4. 点击 **"导出Excel (CSV)"** 按钮
5. 验证: 弹出系统分享面板

#### 步骤4.2: 保存文件
1. 在分享面板中选择"存储到文件"或"隔空投送"到Mac
2. 保存文件到桌面

#### 步骤4.3: 打开CSV文件
1. 在Mac Finder中找到导出的CSV文件
2. 双击用Excel/Numbers打开
3. 或右键 → 打开方式 → Excel

#### 步骤4.4: 验证CSV内容
检查CSV文件包含以下列:
- [ ] 时间
- [ ] 类型 (支出/收入)
- [ ] 币种 (SGD/RMB/USD)
- [ ] 金额
- [ ] 一级分类
- [ ] 二级分类
- [ ] **项目** (重要!)

#### 步骤4.5: 验证数据正确性
1. 检查行数是否与流水数量一致
2. 随机抽查2-3笔交易,对比流水和CSV中的数据
3. 验证中文无乱码
4. 验证时间格式可读

### 验收标准 ✅

- [ ] 系统分享面板正常弹出
- [ ] CSV文件可成功保存
- [ ] Excel/Numbers可正常打开
- [ ] 包含7列 (时间/类型/币种/金额/一级分类/二级分类/项目)
- [ ] 项目列包含正确的项目名称
- [ ] 中文无乱码
- [ ] 数据与流水一致

### 截图/文件
- 分享面板截图
- CSV文件在Excel中打开的截图
- 验证项目列存在

---

## 其他功能验收

### 功能5: 项目管理
- [ ] 新建项目: 正常
- [ ] 重命名项目: 点击⋯ → 重命名 → 修改成功
- [ ] 设置默认项目: 正常
- [ ] 删除并迁移: 已在场景2验证

### 功能6: 记账必填验证
1. 点击 + 按钮
2. 不填任何字段,直接点"保存"
3. 验证: 弹出错误提示 "请填写所有必填字段"

### 功能7: 分类二级必选
1. 点击 + 按钮
2. 点击"选择分类"
3. 验证: 看到左右双栏界面
4. 左侧选一级分类,右侧显示对应二级分类
5. 选择二级分类后自动返回

### 功能8: Tab切换
- [ ] 流水Tab正常
- [ ] 报表Tab正常
- [ ] 更多Tab正常
- [ ] 切换流畅无卡顿

---

## 总结验收结果

### 全部通过项
记录所有 ✅ 的项目

### 发现的问题
记录任何Bug或异常行为

### 性能问题
- 是否有卡顿
- 加载速度
- 图表渲染性能

### 最终结论
□ **通过验收** - P0 MVP可交付
□ **需要修复** - 列出问题清单

---

**验收完成时间:** __________
**验收人签字:** __________
